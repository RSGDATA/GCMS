# ============================================================
# GCMS Data Platform - Environment Configuration
# ============================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# ============================================================

# ------------------------------------------------------------
# SUPABASE CONFIGURATION
# ------------------------------------------------------------
# Your Supabase project URL (e.g., https://xxxxx.supabase.co)
SUPABASE_URL=your_supabase_project_url

# Supabase anonymous key (public, safe for client-side)
SUPABASE_ANON_KEY=your_supabase_anon_key

# Supabase service role key (KEEP SECRET - full database access)
SUPABASE_SERVICE_KEY=your_supabase_service_role_key

# Supabase database connection string for Airbyte
# Format: postgresql://postgres:[password]@db.[project-ref].supabase.co:5432/postgres
SUPABASE_DB_CONNECTION_STRING=postgresql://postgres:your_password@db.xxxxx.supabase.co:5432/postgres

# ------------------------------------------------------------
# SNOWFLAKE CONFIGURATION
# ------------------------------------------------------------
# Snowflake account identifier (e.g., xy12345.us-east-1)
SNOWFLAKE_ACCOUNT=your_snowflake_account

# Snowflake username
SNOWFLAKE_USER=your_snowflake_user

# Snowflake password
SNOWFLAKE_PASSWORD=your_snowflake_password

# Snowflake warehouse name
SNOWFLAKE_WAREHOUSE=your_warehouse_name

# Snowflake database name
SNOWFLAKE_DATABASE=your_database_name

# Snowflake schema for RAW data
SNOWFLAKE_RAW_SCHEMA=raw

# Snowflake schema for Bronze layer
SNOWFLAKE_BRONZE_SCHEMA=bronze

# Snowflake schema for Silver layer
SNOWFLAKE_SILVER_SCHEMA=silver

# Snowflake schema for Gold layer
SNOWFLAKE_GOLD_SCHEMA=gold

# Snowflake role (optional)
SNOWFLAKE_ROLE=your_role

# ------------------------------------------------------------
# AIRFLOW CONFIGURATION
# ------------------------------------------------------------
# Airflow admin username
AIRFLOW_ADMIN_USER=admin

# Airflow admin password (CHANGE THIS!)
AIRFLOW_ADMIN_PASSWORD=change_this_secure_password

# Airflow admin email
AIRFLOW_ADMIN_EMAIL=admin@gcms.org

# Airflow webserver port
AIRFLOW_WEBSERVER_PORT=8080

# Airflow executor (LocalExecutor recommended for single VM)
AIRFLOW_EXECUTOR=LocalExecutor

# Airflow UID (for Docker permissions)
AIRFLOW_UID=50000

# Airflow Fernet key for encryption (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
AIRFLOW_FERNET_KEY=your_fernet_key_here

# Airflow secret key (generate random string)
AIRFLOW_SECRET_KEY=your_secret_key_here

# ------------------------------------------------------------
# AIRBYTE CONFIGURATION
# ------------------------------------------------------------
# Airbyte server URL (internal Docker network)
AIRBYTE_SERVER_HOST=airbyte-server
AIRBYTE_SERVER_PORT=8001

# Airbyte API URL (for Airflow to call)
AIRBYTE_API_URL=http://airbyte-server:8001/api/v1

# Airbyte workspace ID (get from Airbyte UI after setup)
AIRBYTE_WORKSPACE_ID=your_workspace_id

# Airbyte connection ID for Supabase -> Snowflake (get from Airbyte UI)
AIRBYTE_CONNECTION_ID=your_connection_id

# ------------------------------------------------------------
# DBT CONFIGURATION
# ------------------------------------------------------------
# dbt target (dev or prod)
DBT_TARGET=prod

# dbt threads (number of parallel model builds)
DBT_THREADS=4

# ------------------------------------------------------------
# DIGITALOCEAN VM CONFIGURATION (for deployment)
# ------------------------------------------------------------
# VM IP address
VM_IP_ADDRESS=your_vm_ip

# SSH user
VM_SSH_USER=root

# SSH key path (local machine)
VM_SSH_KEY_PATH=~/.ssh/id_rsa

# ------------------------------------------------------------
# POSTGRES (Airflow Metadata DB)
# ------------------------------------------------------------
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow_db_password
POSTGRES_DB=airflow
POSTGRES_PORT=5432

# ------------------------------------------------------------
# GENERAL SETTINGS
# ------------------------------------------------------------
# Environment (dev, staging, prod)
ENVIRONMENT=prod

# Timezone
TZ=America/Chicago

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ------------------------------------------------------------
# OPTIONAL: MONITORING & ALERTING
# ------------------------------------------------------------
# Slack webhook for Airflow alerts (optional)
SLACK_WEBHOOK_URL=

# Email for alerts (optional)
ALERT_EMAIL=

# ------------------------------------------------------------
# NOTES
# ------------------------------------------------------------
# 1. Generate Fernet key:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# 2. Get Supabase connection string from:
#    Supabase Dashboard > Settings > Database > Connection String
#
# 3. Get Airbyte IDs from:
#    Airbyte UI after creating connections
#
# 4. Keep this file secure and never commit to git
# ============================================================
